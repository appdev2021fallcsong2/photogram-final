<h1>
  Photo Details
</h1>


<dl>
  <dt>
    Image
  </dt>
  <dd>
    <img src = <%= @the_photo.image %>>
  </dd>
  <dt>
    Caption
  </dt>
  <dd>
    <%= @the_photo.caption %>
  </dd>

  <dt>
    Owner
  </dt>
  <dd>
    <%= @the_photo.owner.username %>
  </dd>

  <dt>
    Posted
  </dt>
  <dd>
    <%= time_ago_in_words(@the_photo.created_at) %> ago
  </dd>

  <dt>
    Likes count
  </dt>
  <dd>
    <%= @the_photo.likes_count %>
  </dd>

  <dt>
    Comments count
  </dt>
  <dd>
    <%= @the_photo.comments_count %>
  </dd>

  <dt>
    Fans
  </dt>
  <dd>
    <% fans = @the_photo.likes.count  %>
    <% incr = 0 %>
    <% (fans-1).times do %>
    <%= @the_photo.likes[incr].fan.username %>, 
    <% incr = incr + 1 %>
    <% end %>
    and <%= @the_photo.likes[fans-1].fan.username %>
  </dd>

  <dt>
    Add a fan
  </dt>
  <dd><button>Like</button></dd>
</dl>



<h2>
  Comments
</h2>

<table>
  <th>
    Commenter
  </th>

  <th>
    Comment
  </th>

  <th>
    Posted
  </th>

  <% @the_photo.comments.each do |comment| %>
  <tr>
    <td>
      <%= comment.author.username %>
    </td>

    <td>
      <%= comment.body %>
    </td>

    <td>
      <%= time_ago_in_words(comment.created_at)%> ago
    </td>
  </tr>
  <% end %>
</table>

<h3>Add a new comment</h3>
<form action="/insert_comment"  method="post" >
    <input id="browser_photo_id" type="hidden" value="<%= @the_photo.id %>" name="query_photo_id">
    <label for="comment_box">
      Caption
    </label>


    <textarea id="comment_box" name="query_body" placeholder = "Enter a comment..."></textarea>
    <button>Add comment</button>
</form>